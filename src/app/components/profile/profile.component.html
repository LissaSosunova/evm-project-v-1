<div class="back-link">
  <app-back-link></app-back-link>
</div>
<div class="col-xs-12 center-xs row">
  <div class="col-xs-8 row middle-xs main-block">
    <div class="col-xs-3 end-xs middle-xs">
        <span class="name-field">
          Avatar 
        </span> <br>
        <label class="editable">
            editable
          </label>
    </div>
    <div class="col-xs-9 start-xs middle-xs">
        <img src="{{user.avatar.url}}" class="avatar">
      <i class="material-icons delete-avatar" 
      (click)="deleteAvatar()"
      *ngIf="user.avatar.owner !== 'default'">clear</i>
    <label for="avatar-input">
      <i class="material-icons upload-avatar">
          cloud_upload
      </i>
      <input id="avatar-input" 
            type="file" 
            name="image" 
            (change)="uploadAvatar($event)"
            accept=".png, .jpg, .jpeg, .gif"
            enctype="multipart/form-data" #uploadFile>
    </label>  
    </div>
    <div class="col-xs-3 end-xs">
        <span class="name-field">
            Username as ID
        </span>
      <br>
        <label class="editable">
            not editable
          </label>
    </div>
    <div class="col-xs-9 start-xs username">
      {{user.username}}
    </div>
    <div class="col-xs-3 end-xs">
        <span class="name-field">
            Name
        </span>
      <br>
        <label class="editable">
            editable
          </label>
    </div>
    <div class="col-xs-4 start-xs no-padd">
        <app-input-text
        name="userInput"
        [(ngModel)]="user.name"
        #userInput="ngModel"
        (keyup)="saveNewName($event)"
        >
        </app-input-text>
    </div>
    <div class="col-xs-5 start-xs no-padd">
        <i *ngIf="editedName == true" class="material-icons btn-confirm"
          (click)="saveName(user.name)">
            check
        </i>
    </div>
    <div class="col-xs-3 end-xs">
        <span class="name-field">
            E-mail
        </span>
      <br>
        <label class="editable">
            editable
          </label>
    </div>
    <div class="col-xs-4 start-xs no-padd">
        <app-input-email 
        name="mail"
        #mail="ngModel"
        [(ngModel)]="user.email"
        (keyup)="saveNewMail($event)">
        </app-input-email>
    </div>
    <div class="col-xs-5 start-xs no-padd row">
        <div class="col-xs-2 start-xs">
            <i *ngIf="editedMail == true" class="material-icons btn-confirm"
            (click)="saveMail(user.email)">
              check
          </i>
        </div>
          <div class="col-xs-10 name-field">
              (you will have to confirm your e-mail)
          </div>
    </div>
    
    
    <div class="col-xs-3 end-xs name-field">
        <span class="name-field">
            Phone number
        </span>
        <br>
        <label class="editable">
            editable
          </label>
      </div>
      <div class="col-xs-4 start-xs no-padd">
          <app-input-text
          name="userPhone"
          [(ngModel)]="user.phone"
          #userPhone="ngModel"
          (keyup)="saveNewPhone($event)"
          >
          </app-input-text>
      </div>
      <div class="col-xs-5 start-xs no-padd">
          <i *ngIf="editedPhone == true" class="material-icons btn-confirm"
            (click)="savePhone(user.phone)">
              check
          </i>
      </div>
      <div class="change-password">
        <form name="passwordForm"
        #passwordForm="ngForm"
        >
        <div class="row middle-xs">
            <div class="col-xs-3 end-xs name-field">
              <span class="name-field">
                  Old password
              </span>
              <br>
              <label class="editable">
                editable
              </label>
            </div>
            <div class="col-xs-4 start-xs no-padd">
                <app-input-password
                name="oldPassword"
                [placeholder]="'Old password'"
                [(ngModel)]="passwords.oldPassword"
                [required]="true"
                #oldPassword="ngModel"
                >
                </app-input-password>
            </div>
          </div>
          <div class="row middle-xs">
            <div class="col-xs-3 end-xs name-field">
              <span class="name-field">
                  New password
              </span>
              <br>
              <label class="editable">
                editable
              </label>
            </div>
            <div class="col-xs-4 start-xs no-padd">
                <app-input-password
                name="newPassword"
                [placeholder]="'New password'"
                [(ngModel)]="passwords.newPassword"
                [required]="true"
                #newPassword="ngModel"
                >
                </app-input-password>
            </div>
            <div class="col-xs-5 start-xs no-padd">
              <i *ngIf="passwordForm.valid" class="material-icons btn-confirm"
                (click)="changePassword(passwords)">
                  check
              </i>
          </div>
          </div>  
        </form>
      </div>
  </div>
</div>
